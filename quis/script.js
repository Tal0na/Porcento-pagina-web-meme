const quizData = {
  authors: {
    Porcento: [
      {
        quote: "O meu cu levou 5 brincando vei.",
        author: "Porcento",
      },
      {
        quote: "Eu só queria ser invadido por um dedo sangrento.",
        author: "Porcento",
      },
      {
        quote: "O esqueleto não tem cu, Porcento.",
        author: "Porcento",
      },
      {
        quote: "Se cabe na boca é pouco.",
        author: "Porcento",
      },
      {
        quote: "Eu sou um little angel.",
        author: "Porcento",
      },
      {
        quote: "3 rolada no twitter?",
        author: "Porcento",
      },
      {
        quote: "Nem precisa chupar o saco.",
        author: "Porcento",
      },
      {
        quote:
          "Cara, to muito curioso com o que dá pra fazer com esse tentáculo que tá na minha mão.",
        author: "Porcento",
      },
      {
        quote: "Foda que eu gosto de uma banana... a fruta. (não só a fruta).",
        author: "Porcento",
      },
      {
        quote: "Eu sou lindo e frágil tal qual uma taça de cristal.",
        author: "Porcento",
      },
      {
        quote:
          "100 porcento abestado atrás dos pals.. e já acorda com 3 na cara.",
        author: "Porcento",
      },
      {
        quote: "Era pra eu tá me entretendo com os pals agora.",
        author: "Porcento",
      },
      {
        quote: "Olha os pal infileiradinho levando ferro.",
        author: "Porcento",
      },
      {
        quote: "Eu sou complexo demais para pessoas comuns entenderem.",
        author: "Porcento",
      },
      {
        quote: "Eu sou uma caixinha de surpresas.",
        author: "Porcento",
      },
      {
        quote: "Matar é de boa, o problema é o sangue.",
        author: "Porcento",
      },
      {
        quote: "Não to roubando geleia dos gays, to matando os gays.",
        author: "Porcento",
      },
      {
        quote: "O porcento vai começar a jogar rp de pal.",
        author: "Porcento",
      },
      {
        quote: "Eu não confio na linguona dele.",
        author: "Porcento",
      },
      {
        quote: "A maior motivação dos dois vilões desse filme é sexo.",
        author: "Porcento",
      },
      {
        quote:
          "Imagina se acontece o que tavam esperando, todas as orgias nucleares explodem.",
        author: "Porcento",
      },
    ],
    "Lovel Night": [
      {
        quote: "Agora pronto. Frango virou pássaro.",
        author: "Lovel Night",
      },
      {
        quote: "Eu tenho um problema com dor... Tenho medo de gostar.",
        author: "Lovel Night",
      },
      {
        quote:
          "Não, mas se eu compro camisa pequena na shoppe eu to querendo meter boneco.",
        author: "Lovel Night",
      },
      {
        quote: "Ela tem um fedozinho, mas é gostoso.",
        author: "Lovel Night",
      },
      {
        quote:
          "Eu acho que a gente devia parar de dar soco em ponta de faca e começar a sentar.",
        author: "Lovel Night",
      },
      {
        quote:
          "Prefiro assassinar a primeira pessoa que eu ver aqui na rua do que jogar de duelista e fazer lurker.",
        author: "Lovel Night",
      },
      {
        quote:
          "Competitivo de 4 é muito mais difícil de jogar sem a mão no teclado.",
        author: "Lovel Night",
      },
      {
        quote:
          "Você não pode pegar peso? Por isso então que você não aguenta 40 no reto.",
        author: "Lovel Night",
      },
      {
        quote: "Eu sou grande demais para mentes pequenas.",
        author: "Lovel Night",
      },
      {
        quote: "Sinta o cetro, Night.",
        author: "Lovel Night",
      },
      {
        quote: "Eu vejo muito rato com bomba.",
        author: "Lovel Night",
      },
      {
        quote: "Isopor é bom de comer.",
        author: "Lovel Night",
      },
      {
        quote: "Matar é de boa, o problema é o sangue.",
        author: "Lovel Night",
      },
      {
        quote: "E o Jesus que morreu em T pose.",
        author: "Lovel Night",
      },
    ],
    Flip: [
      {
        quote: "Eu gosto de mosquito. 'É porque eles te chupam, né?'",
        author: "Flip",
      },
      {
        quote: "O esqueleto não tem cu, Porcento.",
        author: "Flip",
      },
      {
        quote: "Se você tirar o conteúdo do saco...",
        author: "Flip",
      },
      {
        quote: "Você gosta do dedo do Miyazaki, Night?",
        author: "Flip",
      },
      {
        quote: "Ah, mas vender uma droguilhas e dar uma fuga é tão bom, vei.",
        author: "Flip",
      },
    ],
    Julia: [
      {
        quote: "O porcento queria muito tá de 4 agora.",
        author: "Julia",
      },
      {
        quote: "Isso mate um viado.",
        author: "Julia",
      },
      {
        quote: "Isso é pior do que ser homossexual, é ser pessoa de Twitter.",
        author: "Julia",
      },
    ],
    Uber: [
      {
        quote:
          "Sabia que quando Michael Jackson era vivo ele foi pra Salvador?",
        author: "Uber",
      },
      {
        quote:
          "Top invenções da humanidade: top 1 é o álcool, top 2 é o Fallen, top 3 Breaking Bad a série, top 4 é heroína.",
        author: "Uber",
      },
    ],
    Talona: [
      {
        quote: "O nidere só veio e comeu meu cu. Que delícia.",
        author: "Talona",
      },
      {
        quote: "Eu queria ter uma vó traficante.",
        author: "Talona",
      },
      {
        quote: "Imagina se fosse ao contrário, existir um tráfico de vós.",
        author: "Talona",
      },
      {
        quote: "Eu vi aquele anime de vida real, Breaking Bad.",
        author: "Talona",
      },
    ],
    Spead: [
      {
        quote: "Mas ai você prefere pagar por um pal do que ter um de graça?",
        author: "Spead",
      },
      {
        quote: "Porcento agora tu vai poder montar no viado?",
        author: "Spead",
      },
    ],
  },
}

let quotes = []; // Array para armazenar todas as quotes
let currentQuestionIndex = 0;
let streak = 0; // Variável para armazenar a sequência de respostas corretas

// Função para embaralhar um array
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function createQuiz() {
  // Preenche o array de quotes e embaralha
  quotes = Object.values(quizData.authors).flat();
  shuffleArray(quotes);

  // Limpa o container de perguntas e resultados
  const quizContainer = document.getElementById("quiz-container");
  quizContainer.innerHTML = ""; // Limpa o conteúdo anterior
  
  if (currentQuestionIndex < quotes.length) {
    const questionDiv = document.createElement("div");
    questionDiv.className = "quiz-question";
    
    // Adiciona a frase atual
    const currentQuote = quotes[currentQuestionIndex];
    questionDiv.innerHTML = `
      <p>${currentQuote.quote}</p>
      <div class="authors-list">
        <p>Quem você acha que disse isso?</p>
        ${getAuthorsList()}
        <button class="submit-btn">Enviar</button>
      </div>
    `;
    
    quizContainer.appendChild(questionDiv);
    addSubmitButtonListener(questionDiv, currentQuote.author);
  } else {
    displayQuizEnd();
  }
}

function getAuthorsList() {
  return Object.keys(quizData.authors).map(authorName => 
    `<label><input type="radio" name="author" value="${authorName}"> ${authorName}</label>`
  ).join("");
}

function addSubmitButtonListener(questionDiv, correctAuthor) {
  const submitButton = questionDiv.querySelector(".submit-btn");
  submitButton.addEventListener("click", () => checkAnswer(correctAuthor, questionDiv));
}

function checkAnswer(correctAuthor, questionDiv) {
  const selectedAuthor = questionDiv.querySelector('input[name="author"]:checked');
  const resultDiv = document.getElementById("result");
  const streakInfo = document.getElementById("streak-info");
  
  if (selectedAuthor) {
    if (selectedAuthor.value === correctAuthor) {
      streak++;
      resultDiv.innerHTML = "Você acertou!";
    } else {
      resultDiv.innerHTML = `Você errou! A resposta correta é: ${correctAuthor}.`;
      streak = 0; // Reseta a sequência se errar
    }
    streakInfo.innerHTML = `Sequência atual: ${streak}`; // Atualiza a informação da sequência
    currentQuestionIndex++;
    
    setTimeout(() => {
      resultDiv.innerHTML = ""; // Limpa a mensagem de resultado
      createQuiz(); // Cria a próxima pergunta
    }, 2000); // Espera 2 segundos antes de carregar a próxima pergunta
  } else {
    alert("Por favor, escolha um autor!");
  }
}

function displayQuizEnd() {
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = "<p>Fim do Quiz!</p>";
}

// Initialize the quiz when the DOM is fully loaded
document.addEventListener("DOMContentLoaded", () => {
  createQuiz();
});